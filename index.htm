<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
<style>
body {
    font-family: Arial, sans-serif;
    background-color: #f7f7f7;
    text-align: center;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

main {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
}

.container {
    display: flex;
    flex-direction: row; /* –≠–ª–µ–º–µ–Ω—Ç—ã –≤ —Å—Ç—Ä–æ–∫—É */
    justify-content: space-between; /* –ü—Ä–æ–º–µ–∂—É—Ç–∫–∏ –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ */
    width: 100%;
    max-width: 1200px;
}

.schedule-wrapper,
.chart-container,
.legend-wrapper {
    /* –§–æ–Ω, —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è –∏ —Ç–µ–Ω–∏ —É–±—Ä–∞–Ω—ã */
    padding: 20px;
    box-sizing: border-box;
}

.schedule-wrapper {
    width: 48%; /* –®–∏—Ä–∏–Ω–∞ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã */
}

.chart-container {
    width: 48%; /* –®–∏—Ä–∏–Ω–∞ –¥–ª—è –¥–∏–∞–≥—Ä–∞–º–º */
    display: flex;
    flex-direction: column;
    align-items: center;
}

.chart-container canvas {
    width: 100%;
    height: auto;
    max-width: 300px; /* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –¥–∏–∞–≥—Ä–∞–º–º */
    max-height: 300px;
}

.legend-wrapper {
    display: flex;
    flex-direction: column; /* –õ–µ–≥–µ–Ω–¥–∞ —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ */
    width: 48%; /* –®–∏—Ä–∏–Ω–∞ –¥–ª—è –ª–µ–≥–µ–Ω–¥—ã */
    margin-left: 20px; /* –û—Ç—Å—Ç—É–ø —Å–ª–µ–≤–∞ –¥–ª—è –æ—Ç–¥–µ–ª–µ–Ω–∏—è –æ—Ç –¥–∏–∞–≥—Ä–∞–º–º */
    align-items: flex-start;
}

.legend {
    font-size: 14px;
    padding-left: 20px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
}

.legend span {
    display: flex;
    align-items: center;
    gap: 5px;
    margin: 5px 0;
}

.color-box {
    width: 15px;
    height: 15px;
    display: inline-block;
    border-radius: 3px;
}

/* –ú–µ–¥–∏–∞–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
@media (max-width: 768px) {
    .container {
        flex-direction: column; /* –≠–ª–µ–º–µ–Ω—Ç—ã –≤—ã—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ */
        align-items: center;
    }
    .schedule-wrapper,
    .chart-container,
    .legend-wrapper {
        width: 100%;
        margin-bottom: 20px;
    }
    .legend-wrapper {
        margin-top: 20px;
    }
}

/* –°–∫—Ä—É–≥–ª–µ–Ω–∏—è –∏ —Ç–µ–Ω—å –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã */
table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    border-radius: 8px; /* –°–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤ —Ç–∞–±–ª–∏—Ü—ã */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* –¢–µ–Ω—å –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã */
    overflow: hidden; /* –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–∫—Ä—É–≥–ª–µ–Ω–∏–π */
}

th, td {
    padding: 12px 15px;
    text-align: center;
    border-bottom: 1px solid #ddd;
}

th {
    background-color: #f0f0f0;
    font-weight: bold;
}

/* –£–±–∏—Ä–∞–µ–º –≥—Ä–∞–Ω–∏—Ü—É –¥–ª—è —è—á–µ–µ–∫ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä—è–¥–∞ */
tr:last-child td {
    border-bottom: none;
}

</style>


</head>
<body>
    <main>
        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏ –¥–∏–∞–≥—Ä–∞–º–º –ø–µ—Ä–≤–æ–π –Ω–µ–¥–µ–ª–∏ -->
        <div class="container">
            <div class="schedule-wrapper">
                <h3>–ù–µ–¥–µ–ª—è 1</h3>
                <table id="week1-schedule">
                    <tr>
                        <th>–í—Ä–µ–º—è</th>
                        <th>–ü–Ω</th><th>–í—Ç</th><th>–°—Ä</th><th>–ß—Ç</th><th>–ü—Ç</th><th>–°–±</th><th>–í—Å</th>
                    </tr>
                    <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </table>
            </div>
            <div class="chart-container">
                <canvas id="week1-chart"></canvas>
            </div>
        </div>
        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏ –¥–∏–∞–≥—Ä–∞–º–º –≤—Ç–æ—Ä–æ–π –Ω–µ–¥–µ–ª–∏ -->
        <div class="container">
            <div class="schedule-wrapper">
                <h3>–ù–µ–¥–µ–ª—è 2</h3>
                <table id="week2-schedule">
                    <tr>
                        <th>–í—Ä–µ–º—è</th>
                        <th>–ü–Ω</th><th>–í—Ç</th><th>–°—Ä</th><th>–ß—Ç</th><th>–ü—Ç</th><th>–°–±</th><th>–í—Å</th>
                    </tr>
                    <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </table>
            </div>
            <div class="chart-container">
                <canvas id="week2-chart"></canvas>
            </div>
        </div>
        <!-- –õ–µ–≥–µ–Ω–¥–∞ -->
        <div class="legend-wrapper">
            <div class="legend" id="legend">
                <h3>üîé –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π</h3>
                  <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
        </div>
    
		</main>
    <script>	
   <!--	–ï—Å–ª–∏ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ —É–∫–∞–∑–∞–Ω–∞, —Ç–æ –±—É–¥–µ–º —Å—á–∏—Ç–∞—Ç—å, —á—Ç–æ –æ–Ω–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –≤–µ—Å—å –±–ª–æ–∫ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ —Å–ª–µ–¥—É—é—â–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–æ–≥–ª–∞—Å–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é. -->
const knownActivities = {
    "AI": { code: "AI", label: "–ò–∑—É—á–µ–Ω–∏–µ —Ç–µ–æ—Ä–∏–∏ –ø–æ AI", color: "#fce8e8", emoji: "ñ°é"},
    "CSH": { code: "CSH", label: "–ò–∑—É—á–µ–Ω–∏–µ C#", color: "#e0d7f4", emoji: "üìó"},
    "DLNN": { code: "DLNN", label: "–ì–ª—É–±–æ–∫–æ–µ –æ–±—É—á–µ–Ω–∏–µ T5", color: "#cce7f5", emoji: "ü§ñ" },
    "TRN": { code: "TRN", label: "–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞", color: "#c9f7c4", emoji: "üèãÔ∏è", duration: 2 },
    "TMF": { code: "TMF", label: "–í—Ä–µ–º—è —Å –±–ª–∏–∑–∫–∏–º–∏", color: "#fcd7e7", emoji: "‚ù§Ô∏è" },
    "PRK": { code: "PRK", label: "–ü—Ä–æ–≥—É–ª–∫–∞", color: "#fff4e6", emoji: "üö∂", duration: 0.5 },
    "CLE": { code: "CLE", label: "–£–±–æ—Ä–∫–∞", color: "#fff4c1", emoji: "üè†", duration: 1 },
    "MEAL": { code: "MEAL", label: "–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –µ–¥—ã", color: "#fef3e4", emoji: "üçΩÔ∏è", duration: 1 },
    "FREE": { code: "FREE", label: "–°–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è", color: "#f0f8ff", emoji: "üïäÔ∏è", duration: 1 },
    "SLEEP": { code: "SLEEP", label: "–°–æ–Ω", color: "#b0c4de", emoji: "üõè", duration: 8 }
};

const week1Schedule = [
    { time: "09:00", activities: ["FREE", "DLNN", "FREE", "FREE", "CLE", "FREE", "FREE"] },
    { time: "10:00", activities: ["CLE", "DLNN", "CLE", "FREE", "FREE", "CLE", "FREE"] },
    { time: "11:00", activities: ["TRN", "AI", "TRN", "FREE", "TRN", "TRN", "FREE"] },
    { time: "13:30", activities: ["MEAL", "MEAL", "MEAL", "MEAL", "MEAL", "MEAL", "MEAL"] },
    { time: "14:00", activities: ["CSH", "TMF", "DLNN", "FREE", "DLNN", "CSH", "FREE"] },
    { time: "17:00", activities: ["FREE", "FREE", "FREE", "FREE", "FREE", "FREE", "FREE"] },
    { time: "18:00", activities: ["MEAL", "MEAL", "MEAL", "MEAL", "MEAL", "MEAL", "MEAL"] },
    { time: "19:00", activities: ["PRK", "FREE", "PRK", "FREE", "FREE", "PRK", "FREE"] },
    { time: "23:00", activities: ["SLEEP", "SLEEP", "SLEEP", "SLEEP", "SLEEP", "SLEEP", "SLEEP"] }
];

const week2Schedule = [
    { time: "09:00", activities: ["FREE", "CSH", "FREE", "FREE", "DLNN", "CLE", "FREE"] },
    { time: "10:00", activities: ["CLE", "CSH", "CLE", "FREE", "FREE", "FREE", "FREE"] },
    { time: "11:00", activities: ["TRN", "TMF", "TRN", "FREE", "TRN", "TRN", "FREE"] },
    { time: "13:30", activities: ["MEAL", "MEAL", "MEAL", "MEAL", "MEAL", "MEAL", "MEAL"] },
    { time: "14:00", activities: ["AI", "DLNN", "AI", "FREE", "TMF", "DLNN", "FREE"] },
    { time: "17:00", activities: ["FREE", "FREE", "FREE", "FREE", "FREE", "FREE", "FREE"] },
    { time: "18:00", activities: ["MEAL", "MEAL", "MEAL", "MEAL", "MEAL", "MEAL", "MEAL"] },
    { time: "19:00", activities: ["PRK", "FREE", "PRK", "FREE", "FREE", "PRK", "FREE"] },
    { time: "23:00", activities: ["SLEEP", "SLEEP", "SLEEP", "SLEEP", "SLEEP", "SLEEP", "SLEEP"] }
];


        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è null –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
        function fillNullActivities(schedule) {
            for (let i = 1; i < schedule.length; i++) {
                for (let j = 1; j < 8; j++) {
                    if (schedule[i].activities[j] === null) {
                        schedule[i].activities[j] = schedule[i - 1].activities[j];
                    }
                }
            }
        }

        fillNullActivities(week1Schedule); // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ null –¥–ª—è –ø–µ—Ä–≤–æ–π –Ω–µ–¥–µ–ª–∏
        fillNullActivities(week2Schedule); // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ null –¥–ª—è –≤—Ç–æ—Ä–æ–π –Ω–µ–¥–µ–ª–∏

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
        function renderSchedule(weekSchedule, tableId) {
            const table = document.getElementById(tableId);
            weekSchedule.forEach(row => {
                const tr = document.createElement('tr');
                const timeCell = document.createElement('td');
                timeCell.textContent = row.time;
                tr.appendChild(timeCell);
                row.activities.forEach(activity => {
                    const td = document.createElement('td');
                    const activityDetails = knownActivities[activity];
                    if (activityDetails) {
                        td.innerHTML = `<span class="activity-emoji">${activityDetails.emoji}</span><br><span class="activity-code">${activityDetails.code}</span>`;
                        td.style.backgroundColor = activityDetails.color;
                    }
                    tr.appendChild(td);
                });
                table.appendChild(tr);
            });
        }

        renderSchedule(week1Schedule, 'week1-schedule');
        renderSchedule(week2Schedule, 'week2-schedule');

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∏–∞–≥—Ä–∞–º–º —Å —É—á–µ—Ç–æ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
function renderChart(weekSchedule, chartId) {
    // –°—á–∏—Ç–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∑–∞ –Ω–µ–¥–µ–ª—é
    const activityHours = Object.keys(knownActivities).reduce((acc, activity) => {
        acc[activity] = 0;
        weekSchedule.forEach(row => {
            row.activities.forEach((a, index) => {
                if (a === activity) {
                    // –ï—Å–ª–∏ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —É–∫–∞–∑–∞–Ω–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ—ë, –∏–Ω–∞—á–µ —Å—á–∏—Ç–∞–µ–º, —á—Ç–æ –æ–Ω–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –≤–µ—Å—å –±–ª–æ–∫ –≤—Ä–µ–º–µ–Ω–∏
                    const activityDuration = knownActivities[a].duration || 1;
                    // –ï—Å–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ —É–∫–∞–∑–∞–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, null –∏–ª–∏ undefined), —Å—á–∏—Ç–∞–µ–º, —á—Ç–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞–Ω–∏–º–∞–µ—Ç –≤–µ—Å—å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –±–ª–æ–∫
                    acc[activity] += activityDuration;
                }
            });
        });
        return acc;
    }, {});

    // –§–æ—Ä–º–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–∏–∞–≥—Ä–∞–º–º—ã
    const chartData = {
        labels: Object.keys(knownActivities).map(activity => knownActivities[activity].label),
        datasets: [{
            data: Object.keys(knownActivities).map(activity => activityHours[activity]),
            backgroundColor: Object.keys(knownActivities).map(activity => knownActivities[activity].color),
            label: '–ß–∞—Å—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏'  // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º–µ
        }]
    };

    const ctx = document.getElementById(chartId).getContext('2d');
    new Chart(ctx, {
        type: 'pie',
        data: chartData,
        options: {
            plugins: {
                datalabels: {
                    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å–æ–≤ (—Å—É–º–º–∞) –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º–µ
                    formatter: (value) => value > 0 ? `${value} —á` : ''
                }
            },
            responsive: true,
            plugins: {
                legend: {
                    display: false  // –°–∫—Ä—ã–≤–∞–µ–º –ª–µ–≥–µ–Ω–¥—É
                }
            }
        }
    });
}
        renderChart(week1Schedule, 'week1-chart');
        renderChart(week2Schedule, 'week2-chart');
		
		function renderLegend() {
    const legendContainer = document.getElementById('legend');
    Object.keys(knownActivities).forEach(activityCode => {
        const activity = knownActivities[activityCode];
        const legendItem = document.createElement('span');
        legendItem.innerHTML = `<div class="color-box" style="background-color: ${activity.color};"></div>  ${activity.emoji} ${activity.label}`;
        legendContainer.appendChild(legendItem);
    });
}

renderLegend();  // –ó–∞–ø–æ–ª–Ω—è–µ–º –ª–µ–≥–µ–Ω–¥—É

function adjustChartVisibility() {
    const chartContainers = document.querySelectorAll('.chart-container');
    const isLandscape = window.innerWidth > window.innerHeight;
    
    chartContainers.forEach(container => {
        container.style.display = isLandscape ? '' : 'none';
    });
}

window.addEventListener('resize', adjustChartVisibility);
document.addEventListener('DOMContentLoaded', adjustChartVisibility);
    </script>
</body>
</html>
